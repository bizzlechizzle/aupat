# AUPAT v0.1.0 - REVISED Implementation Plan

**Date:** 2025-11-18
**Goal:** 100% v0.1.0 Completion (NO deferrals)

---

## CORRECTED AUDIT

**Browser is REQUIRED, not optional.** All backend infrastructure exists (browser-manager.js, IPC handlers). Only missing: Browser.svelte UI component.

---

## v0.1.0 MISSING FEATURES (COMPLETE LIST)

### Priority 1: Database & Backend (Foundation)

1. **Notes System**
   - Database: Create `notes` table
   - API: POST/GET/PUT/DELETE `/api/locations/{uuid}/notes`
   - Estimate: 1 hour

2. **Location Filter Flags**
   - Database: Add `is_favorite`, `is_historical`, `is_undocumented` columns
   - API: Add filter params to GET `/api/locations`
   - API: Add GET `/api/locations/random`
   - Estimate: 30 minutes

3. **Stats API**
   - API: GET `/api/locations/{uuid}/stats`
   - Returns: image/video counts, file sizes, cameras, date ranges, hashes
   - Estimate: 30 minutes

**Phase 1 Total: ~2 hours**

---

### Priority 2: GUI Components (User-Facing)

4. **Browser View (REQUIRED)**
   - Create `Browser.svelte` component
   - Wire up browser-manager.js via IPC
   - Add navigation controls (back, forward, reload, URL bar)
   - Add bookmark button
   - Add to App.svelte navigation menu
   - **Estimate: 2 hours**

5. **Nerd Stats Section**
   - Add collapsible section to LocationPage.svelte
   - Display stats from API
   - Show file counts, sizes, cameras, hashes
   - **Estimate: 1 hour**

6. **User Notes Section**
   - Create `NotesSection.svelte` component
   - List note titles, add/edit/delete functionality
   - Simple textarea editor
   - Integrate into LocationPage.svelte
   - **Estimate: 2 hours**

7. **Favorites/Random/Historical Filters**
   - Add filter buttons to Map.svelte toolbar
   - Add filter buttons to LocationsList.svelte header
   - Add "Random Location" button
   - Wire up to API
   - **Estimate: 1.5 hours**

8. **Settings: Delete Import Media**
   - Add toggle switch to Settings.svelte
   - Save to electron-store
   - Pass to import API
   - **Estimate: 15 minutes**

**Phase 2 Total: ~7 hours**

---

### Priority 3: Testing & Documentation

9. **End-to-End Testing**
   - Test browser navigation
   - Test adding notes
   - Test favorites/filters
   - Test nerd stats display
   - Test with sample locations
   - **Estimate: 1 hour**

10. **Documentation Updates**
    - Update lilbits.md with new components
    - Update techguide.md with new API endpoints
    - **Estimate: 30 minutes**

**Phase 3 Total: ~1.5 hours**

---

## TOTAL TIME ESTIMATE: ~10-11 hours (1.5 days focused work)

---

## IMPLEMENTATION ORDER

### Day 1: Backend Foundation (Phase 1)
**Morning (3 hours):**
1. Create `scripts/db_migrate_v015.py`
   - Add notes table
   - Add filter flags to locations
   - Test migration

2. Add API endpoints to `scripts/api_routes_v012.py`
   - Notes CRUD
   - Stats endpoint
   - Filter/random endpoints
   - Test endpoints with curl

**Afternoon (4 hours):**
3. Create `desktop/src/renderer/lib/Browser.svelte`
   - Browser controls (back, forward, reload, URL bar)
   - Bookmark button
   - Wire up IPC handlers
   - Test navigation

4. Add Browser to navigation in `desktop/src/renderer/App.svelte`
   - Add menu item
   - Test switching views

---

### Day 2: GUI Features (Phase 2 + Phase 3)
**Morning (3 hours):**
5. Add Nerd Stats to `desktop/src/renderer/lib/LocationPage.svelte`
   - Collapsible section
   - Display stats from API
   - Test with sample location

6. Create `desktop/src/renderer/lib/NotesSection.svelte`
   - Notes list
   - Add/edit/delete UI
   - Wire up to notes API
   - Integrate into LocationPage.svelte

**Afternoon (2-3 hours):**
7. Add filter buttons to Map.svelte and LocationsList.svelte
   - Favorite icon toggle
   - Historical filter
   - Un-documented filter
   - Random button
   - Test filtering

8. Add Settings toggle for Delete Import Media

9. End-to-end testing
   - Test all new features
   - Fix any bugs

10. Update documentation

---

## SUCCESS CRITERIA

### Database
- [x] Notes table exists
- [x] Filter flags exist on locations table
- [x] Migration runs successfully

### API
- [x] Notes CRUD endpoints work
- [x] Stats endpoint returns correct data
- [x] Filter endpoints work
- [x] Random endpoint works

### GUI
- [x] Browser view displays and navigates
- [x] Can bookmark current page
- [x] Nerd Stats section displays on location page
- [x] Can create/edit/delete notes on locations
- [x] Filter buttons work on map and list
- [x] Random location button works
- [x] Delete import media setting saves

### Testing
- [x] All features tested manually
- [x] No critical bugs
- [x] Documentation updated

---

## COMMIT STRATEGY

Following claude.md and LILBITS principles:

**Commit 1:** `[v0.1.5] [DB] Add notes table and filter flags migration`
**Commit 2:** `[v0.1.5] [API] Add notes CRUD, stats, and filter endpoints`
**Commit 3:** `[v0.1.5] [GUI] Add Browser view component`
**Commit 4:** `[v0.1.5] [GUI] Add Nerd Stats section to location pages`
**Commit 5:** `[v0.1.5] [GUI] Add User Notes component`
**Commit 6:** `[v0.1.5] [GUI] Add location filters and random button`
**Commit 7:** `[v0.1.5] [GUI] Add delete import media setting`
**Commit 8:** `[v0.1.5] [DOCS] Update techguide and lilbits`
**Final:** `[v0.1.0] [RELEASE] Complete all v0.1.0 features`

---

## READY TO START

**Next Action:** Create `scripts/db_migrate_v015.py`

Awaiting your approval to proceed.
